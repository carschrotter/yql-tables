<?xml version="1.0" encoding="UTF-8" ?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
    <meta>
        <sampleQuery>select * from {table}</sampleQuery>
        <sampleQuery>select * from {table} where date="2013-09-13"</sampleQuery>
    </meta>
    <bindings>
        <select itemPath="" produces="XML">
            <urls>
                <url></url>
            </urls>
            <inputs>
                <key id="date" as="date" type="xs:date" paramType="variable" required="false" />
                <key id="calendar" as="calendar" type="xs:integer" paramType="variable" required="false"/>
            </inputs>
            <execute>
<![CDATA[
    y.include("http://datejs.googlecode.com/files/date.js");
    function getFormattedDate(date) {
        var str = date.getFullYear() + "-" + date.getMonth() + "-" + date.getDate()
        return str;
    }
    calendar = calendar || 1;
    var query = null, d = null, url = '', xpath='/html/body/div/div/div/div/form';
    y.log(date);
    if (date) { d =  new Date(date, "yyyy-mm-dd"); }
    else { d = new Date(); }
    y.log(d);
    url = 'http://www.feuerwerk-forum.de/calendar.php?do=getinfo&day=' + getFormattedDate(d) + '&c=' + calendar;
    query = y.query("select * from html where url=@url and xpath=@xpath",{url:url, xpath:xpath});
    response.object = query.results;
]]>
            </execute>
        </select>
    </bindings>
</table>